digraph "CFG for 'raw_handle_perm_lock' function" {
	label="CFG for 'raw_handle_perm_lock' function";

	Node0x5558232bb2b0 [shape=record,color="#b70d28ff", style=filled, fillcolor="#b70d2870",label="{entry:\l  %local_err = alloca %struct.Error*, align 8\l  call void @llvm.dbg.value(metadata %struct.BlockDriverState* %bs, metadata\l... !2860, metadata !DIExpression()), !dbg !2943\l  call void @llvm.dbg.value(metadata i32 %op, metadata !2861, metadata\l... !DIExpression()), !dbg !2943\l  call void @llvm.dbg.value(metadata i64 %new_perm, metadata !2862, metadata\l... !DIExpression()), !dbg !2943\l  call void @llvm.dbg.value(metadata i64 %new_shared, metadata !2863, metadata\l... !DIExpression()), !dbg !2943\l  call void @llvm.dbg.value(metadata %struct.Error** %errp, metadata !2864,\l... metadata !DIExpression()), !dbg !2943\l  %opaque = getelementptr inbounds %struct.BlockDriverState,\l... %struct.BlockDriverState* %bs, i64 0, i32 8, !dbg !2944\l  %0 = bitcast i8** %opaque to %struct.BDRVRawState**, !dbg !2944\l  %1 = load %struct.BDRVRawState*, %struct.BDRVRawState** %0, align 8, !dbg\l... !2944\l  call void @llvm.dbg.value(metadata %struct.BDRVRawState* %1, metadata !2865,\l... metadata !DIExpression()), !dbg !2943\l  call void @llvm.dbg.value(metadata i32 0, metadata !2939, metadata\l... !DIExpression()), !dbg !2943\l  %2 = bitcast %struct.Error** %local_err to i8*, !dbg !2945\l  call void @llvm.lifetime.start.p0i8(i64 8, i8* nonnull %2) #20, !dbg !2945\l  call void @llvm.dbg.value(metadata %struct.Error* null, metadata !2940,\l... metadata !DIExpression()), !dbg !2943\l  store %struct.Error* null, %struct.Error** %local_err, align 8, !dbg !2946\l  %use_lock = getelementptr inbounds %struct.BDRVRawState,\l... %struct.BDRVRawState* %1, i64 0, i32 1, !dbg !2947\l  %3 = load i8, i8* %use_lock, align 4, !dbg !2947, !range !2949\l  %tobool = icmp eq i8 %3, 0, !dbg !2947\l  br i1 %tobool, label %cleanup, label %if.end, !dbg !2950, !prof !2951\l|{<s0>T|<s1>F}}"];
	Node0x5558232bb2b0:s0 -> Node0x5558232cc790;
	Node0x5558232bb2b0:s1 -> Node0x5558232cc0b0;
	Node0x5558232cc0b0 [shape=record,color="#b70d28ff", style=filled, fillcolor="#b70d2870",label="{if.end:                                           \l  %call = tail call i32 @bdrv_get_flags(%struct.BlockDriverState* nonnull %bs)\l... #20, !dbg !2952\l  %and = and i32 %call, 2048, !dbg !2954\l  %tobool1 = icmp eq i32 %and, 0, !dbg !2954\l  br i1 %tobool1, label %if.end3, label %cleanup, !dbg !2955, !prof !2956\l|{<s0>T|<s1>F}}"];
	Node0x5558232cc0b0:s0 -> Node0x5558232ccb80;
	Node0x5558232cc0b0:s1 -> Node0x5558232cc790;
	Node0x5558232ccb80 [shape=record,color="#b70d28ff", style=filled, fillcolor="#b70d2870",label="{if.end3:                                          \l  switch i32 %op, label %cleanup [\l    i32 0, label %sw.bb\l    i32 2, label %sw.bb24\l    i32 1, label %sw.bb33\l  ], !dbg !2957, !prof !2958\l|{<s0>def|<s1>0|<s2>2|<s3>1}}"];
	Node0x5558232ccb80:s0 -> Node0x5558232cc790;
	Node0x5558232ccb80:s1 -> Node0x5558232cdfe0;
	Node0x5558232ccb80:s2 -> Node0x5558232d1910;
	Node0x5558232ccb80:s3 -> Node0x5558232d2ae0;
	Node0x5558232cdfe0 [shape=record,color="#3d50c3ff", style=filled, fillcolor="#c32e3170",label="{sw.bb:                                            \l  %perm = getelementptr inbounds %struct.BDRVRawState, %struct.BDRVRawState*\l... %1, i64 0, i32 5, !dbg !2959\l  %4 = load i64, i64* %perm, align 8, !dbg !2959\l  %or = or i64 %4, %new_perm, !dbg !2962\l  %cmp = icmp eq i64 %or, %4, !dbg !2963\l  %shared_perm = getelementptr inbounds %struct.BDRVRawState,\l... %struct.BDRVRawState* %1, i64 0, i32 6, !dbg !2964\l  %5 = load i64, i64* %shared_perm, align 8, !dbg !2964\l  %and5 = and i64 %5, %new_shared, !dbg !2964\l  %cmp7 = icmp eq i64 %and5, %5, !dbg !2965\l  %or.cond = and i1 %cmp, %cmp7, !dbg !2966\l  br i1 %or.cond, label %cleanup, label %if.end9, !dbg !2966, !prof !2967\l|{<s0>T|<s1>F}}"];
	Node0x5558232cdfe0:s0 -> Node0x5558232cc790;
	Node0x5558232cdfe0:s1 -> Node0x5558232ce120;
	Node0x5558232ce120 [shape=record,color="#3d50c3ff", style=filled, fillcolor="#d8564670",label="{if.end9:                                          \l  %fd = getelementptr inbounds %struct.BDRVRawState, %struct.BDRVRawState* %1,\l... i64 0, i32 0, !dbg !2968\l  %6 = load i32, i32* %fd, align 8, !dbg !2968\l  %or14 = xor i64 %and5, -1, !dbg !2969\l  %call15 = tail call fastcc i32 @raw_apply_lock_bytes(%struct.BDRVRawState*\l... nonnull %1, i32 %6, i64 %or, i64 %or14, i1 zeroext false, %struct.Error**\l... %errp), !dbg !2970\l  call void @llvm.dbg.value(metadata i32 %call15, metadata !2939, metadata\l... !DIExpression()), !dbg !2943\l  %tobool16 = icmp eq i32 %call15, 0, !dbg !2971\l  br i1 %tobool16, label %if.then17, label %sw.bb24, !dbg !2973, !prof !2974\l|{<s0>T|<s1>F}}"];
	Node0x5558232ce120:s0 -> Node0x5558232cfd30;
	Node0x5558232ce120:s1 -> Node0x5558232d1910;
	Node0x5558232cfd30 [shape=record,color="#3d50c3ff", style=filled, fillcolor="#d8564670",label="{if.then17:                                        \l  %7 = load i32, i32* %fd, align 8, !dbg !2975\l  %call19 = tail call fastcc i32 @raw_check_lock_bytes(i32 %7, i64 %new_perm,\l... i64 %new_shared, %struct.Error** %errp), !dbg !2977\l  call void @llvm.dbg.value(metadata i32 %call19, metadata !2939, metadata\l... !DIExpression()), !dbg !2943\l  %tobool20 = icmp eq i32 %call19, 0, !dbg !2978\l  br i1 %tobool20, label %cleanup, label %if.end22, !dbg !2980, !prof !2974\l|{<s0>T|<s1>F}}"];
	Node0x5558232cfd30:s0 -> Node0x5558232cc790;
	Node0x5558232cfd30:s1 -> Node0x5558232d0d80;
	Node0x5558232d0d80 [shape=record,penwidth=3.0, color="red",label="{if.end22:                                         \l  %arraydecay = getelementptr inbounds %struct.BlockDriverState,\l... %struct.BlockDriverState* %bs, i64 0, i32 12, i64 0, !dbg !2981\l  tail call void (%struct.Error**, i8*, ...)\l... @error_append_hint(%struct.Error** %errp, i8* getelementptr inbounds ([42 x\l... i8], [42 x i8]* @.str.37, i64 0, i64 0), i8* nonnull %arraydecay) #20, !dbg\l... !2982\l  br label %sw.bb24, !dbg !2983\l}"];
	Node0x5558232d0d80 -> Node0x5558232d1910;
	Node0x5558232d1910 [shape=record,penwidth=3.0, color="red",label="{sw.bb24:                                          \l  %ret.0 = phi i32 [ 0, %if.end3 ], [ %call15, %if.end9 ], [ %call19,\l... %if.end22 ], !dbg !2943\l  call void @llvm.dbg.value(metadata i32 %ret.0, metadata !2939, metadata\l... !DIExpression()), !dbg !2943\l  %fd25 = getelementptr inbounds %struct.BDRVRawState, %struct.BDRVRawState*\l... %1, i64 0, i32 0, !dbg !2984\l  %8 = load i32, i32* %fd25, align 8, !dbg !2984\l  %perm26 = getelementptr inbounds %struct.BDRVRawState, %struct.BDRVRawState*\l... %1, i64 0, i32 5, !dbg !2985\l  %9 = load i64, i64* %perm26, align 8, !dbg !2985\l  %shared_perm27 = getelementptr inbounds %struct.BDRVRawState,\l... %struct.BDRVRawState* %1, i64 0, i32 6, !dbg !2986\l  %10 = load i64, i64* %shared_perm27, align 8, !dbg !2986\l  %neg28 = xor i64 %10, -1, !dbg !2987\l  call void @llvm.dbg.value(metadata %struct.Error** %local_err, metadata\l... !2940, metadata !DIExpression(DW_OP_deref)), !dbg !2943\l  %call29 = call fastcc i32 @raw_apply_lock_bytes(%struct.BDRVRawState* %1,\l... i32 %8, i64 %9, i64 %neg28, i1 zeroext true, %struct.Error** nonnull\l... %local_err), !dbg !2988\l  %11 = load %struct.Error*, %struct.Error** %local_err, align 8, !dbg !2989\l  call void @llvm.dbg.value(metadata %struct.Error* %11, metadata !2940,\l... metadata !DIExpression()), !dbg !2943\l  %tobool30 = icmp eq %struct.Error* %11, null, !dbg !2989\l  br i1 %tobool30, label %cleanup, label %if.then31, !dbg !2991\l|{<s0>T|<s1>F}}"];
	Node0x5558232d1910:s0 -> Node0x5558232cc790;
	Node0x5558232d1910:s1 -> Node0x5558232d2240;
	Node0x5558232d2240 [shape=record,penwidth=3.0, color="red",label="{if.then31:                                        \l  call void @warn_report_err(%struct.Error* nonnull %11) #20, !dbg !2992\l  br label %cleanup, !dbg !2994\l}"];
	Node0x5558232d2240 -> Node0x5558232cc790;
	Node0x5558232d2ae0 [shape=record,color="#3d50c3ff", style=filled, fillcolor="#c32e3170",label="{sw.bb33:                                          \l  %fd34 = getelementptr inbounds %struct.BDRVRawState, %struct.BDRVRawState*\l... %1, i64 0, i32 0, !dbg !2995\l  %12 = load i32, i32* %fd34, align 8, !dbg !2995\l  %neg35 = xor i64 %new_shared, -1, !dbg !2996\l  call void @llvm.dbg.value(metadata %struct.Error** %local_err, metadata\l... !2940, metadata !DIExpression(DW_OP_deref)), !dbg !2943\l  %call36 = call fastcc i32 @raw_apply_lock_bytes(%struct.BDRVRawState* %1,\l... i32 %12, i64 %new_perm, i64 %neg35, i1 zeroext true, %struct.Error** nonnull\l... %local_err), !dbg !2997\l  %13 = load %struct.Error*, %struct.Error** %local_err, align 8, !dbg !2998\l  call void @llvm.dbg.value(metadata %struct.Error* %13, metadata !2940,\l... metadata !DIExpression()), !dbg !2943\l  %tobool37 = icmp eq %struct.Error* %13, null, !dbg !2998\l  br i1 %tobool37, label %cleanup, label %if.then38, !dbg !3000, !prof !3001\l|{<s0>T|<s1>F}}"];
	Node0x5558232d2ae0:s0 -> Node0x5558232cc790;
	Node0x5558232d2ae0:s1 -> Node0x5558232d30b0;
	Node0x5558232d30b0 [shape=record,penwidth=3.0, color="red",label="{if.then38:                                        \l  call void @warn_report_err(%struct.Error* nonnull %13) #20, !dbg !3002\l  br label %cleanup, !dbg !3004\l}"];
	Node0x5558232d30b0 -> Node0x5558232cc790;
	Node0x5558232cc790 [shape=record,color="#b70d28ff", style=filled, fillcolor="#b70d2870",label="{cleanup:                                          \l  %retval.0 = phi i32 [ 0, %entry ], [ 0, %if.end ], [ 0, %if.then17 ], [ 0,\l... %if.end3 ], [ 0, %if.then38 ], [ 0, %sw.bb33 ], [ %ret.0, %if.then31 ], [\l... %ret.0, %sw.bb24 ], [ 0, %sw.bb ], !dbg !2943\l  call void @llvm.lifetime.end.p0i8(i64 8, i8* nonnull %2) #20, !dbg !3005\l  ret i32 %retval.0, !dbg !3005\l}"];
}
